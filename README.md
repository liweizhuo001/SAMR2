Copyright 2022 by Nanjing University of Posts and Telecommunications. 

Time: 22/4/2022   Authors: Weizhuo Li 

Email: liweizhuo@amss.ac.cn 

## 1. Introductionï¼š
SAMR2 (Semi-Automatic Mmapping Revision) is a graph-based tool for interactive mapping revision. We equip it with partially automatized process to reduce the effort of manual evaluation.
### Main Innovations:
* SAMR2 is a graph-based method for interactive mapping revision with the purpose of reducing manual efforts as much as possible, where the mapping arcs in the integrated graph can be updated automatically according to manual decisions in polynomial time.
* SAMR2 has been equided with an impact function based on the integrated graph and weights of mappings, which can identify the most influential mappings and display them to experts. In this way, the efforts of manual decisions could be reduced further. 
* SAMR2 can be improved for the practicality of the alignments of large-scale ontologies because it introduces the notion of "reliable" mappings that can alleviate the burden of experts for making decisions.
* SAMR2 can save more manual decisions than other interactive
revision methods in most alignments generated by real-world ontologies.



## 2. Usage:
### Software:
Java 1.7 or higher. Hardware: 8GB RAM or more. 

### Data sets:
The directory of **testdata** contains the various ontology pairs in I3CON repository (named I3CON), Benchmark Track (named benchmark), Conference Track (named conference), Anatomy Track (named anatomy) and Large BioMed Track (named largeBio) from Ontology Alignment Evaluation Initiative ([OAEI](http://oaei.ontologymatching.org/)). 

You can find tested alignments in the directory of **testdata/mappings**. Alignments generated by **HMatch** and **ASMOV** are provided for I3CON repository, Benchmark Track, Conference Track. 
Alignments generated by **AROMA**, **AML-Map**, **LogMapLite** and **FCA-Map** are provided for Anatomy Track and Large BioMed Track. In addition, the reference alignments related to them also are saved in this directory. 


### Operations:
If you install Eclipse, you can import this project directly. Notice that SAMR2 is a **maven project**, so some packages for Neo4j need to be downloaded according to pom.xml.  

Relatively, [SAMR](https://github.com/liweizhuo001/SAMR) is a normal java project that you can import it to eclipse and run it directly.

The key functions are listed as follows. 
In com.njupt.exp pacakge

* **GraphBasedRevision4ASMOVInteractive.java** is graph-based program for **ASMOV's** alignments in interactive way.
* **GraphBasedRevision4HMatchOracle.java** is graph-based program for **ASMOV's** alignments in the oracle view.
* **GraphBasedRevision4HMatchInteractive.java** is graph-based program for **HMatch's** alignments in interactive way.
* **GraphBasedRevision4HMatchOracle.java** is graph-based program for **HMatch** alignments in the oracle view.
* **GraphBasedRevision4AnatomyOracle.java** is graph-based program for the anatomy alignments of **AROMA** alignments in the oracle view.
* **GraphBasedRevision4LargeBioOracle.java** is graph-based program for the largeBio alignments of **AROMA**, **AML-Map**, **LogMapLite** and **FCA-Map** alignments in the oracle view.

In com.njupt.util package 

* **ScoringMappingRevision.java** can change the pattern whether interative revision or automatic in the oracle view (line 81-93).

In aml pacakge.

* **RepairingByGraph4ASMOV.java** is a program without graph database for **ASMOV's** alignments in interactive way.
* **RepairingByGraph4HMatch.java** is a program without graph database for **HMatch** alignments in interactive way.
* **RepairingByGraphAutoHMatch.java** is a program without graph database for **HMatch** alignments in the oracle view.
* **RepairingByGraphAutoASMOV.java** is a program without graph database for **ASMOV** alignments in the oracle view.
* **RepairingByGraphAutoMedical.java** is a program without graph database for the anatomy largeBio alignments of **AROMA**, **AML-Map**, **LogMapLite** and **FCA-Map** alignments in the oracle view.

* **AML.java** can change the pattern whether interative revision or automatic in the oracle view (line 917-951). Moreover, it can set "reliable" mappings in line 914, whose code is "**r.obtainReliableMappings();**".
For large-scale ontologies, which can save 10%-35% for alignments generated by large ontologies. 
In aml package 


In aml.filter package

* **RepairerGraph.java** contain all the revision methods, which equipped with different impact functions. Moreover, there exists one varibale about error_user that can be set in line 94, which is used to test automated evaluation with error rate. For "error_user = 5", it means that when an expert makes a decision (approved or declined), there may be a 5% probability that the final decision will be the opposite conclusion (declined or approved).
* The **influence relation** is implemented in line 2881, whose code is "**EnhanceParentMap();**". Relatively, the detection of incoherence tailored for enhanced integrated graph is implemented in line 3748, whose code is "**if(!satisfiedInfluenceCondition(mipp));**".


### Interactive interface:

To provide better interactive services, we also provide a web version, called [SAOR](https://github.com/liweizhuo001/SAOR). You can download it and follow its instruction to complete the interactive mapping revision. 


### Matcher systems for generating alignments:

For [HMatch](http://islab.di.unimi.it/hmatch/news.php), it can be downloaded in <http://islab.di.unimi.it/hmatch/news.php>.

For [AROMA](https://gforge.inria.fr/frs/?group_id=2089), it can be downloaded in <https://gforge.inria.fr/frs/?group_id=2089>.

For [FCA-Map](https://github.com/liweizhuo001/FCA-Map), it can be downloaded in <https://github.com/liweizhuo001/FCA-Map>.

For [LogMap](https://github.com/ernestojimenezruiz/logmap-matcher), it can be downloaded in <https://github.com/ernestojimenezruiz/logmap-matcher>.

For [AML](https://github.com/AgreementMakerLight/AML-Project), it can be downloaded in <https://github.com/AgreementMakerLight/AML-Project>.

For **AROMA**, we obtain its alignments from [OAEI](http://oaei.ontologymatching.org/), which also provide lots of alignemtns generated by many matching systems and reference ones for evaluating these generated alignments.